<%
=begin
apps: postgresql, fluentd, redis, redis-cluster, minio, solr, mariadb-galera
platforms: kubernetes
id: enable_tls
title: Enable TLS
category: administration
weight: 40
highlight: 40
=end %>

TLS support can be enabled in the chart by specifying the *tls.* parameters while creating a release. The following parameters should be configured to properly enable the TLS support in the chart:

* *tls.enabled*: Enable TLS support. Defaults to false
* *tls.certificatesSecret*: Name of the secret that contains the certificates. No defaults.
* *tls.certFilename*: Certificate filename. No defaults.
* *tls.certKeyFilename*: Certificate key filename. No defaults.
* *tls.certCAFilename*: CA Certificate filename. No defaults.

For example:

* Create the secret with the certificate files:

        $ kubectl create secret generic certificates-tls-secret --from-file=./cert.pem --from-file=./cert.key --from-file=./ca.pem

* Deploy the chart with the following parameters:

        tls.enabled="true"
        tls.certificatesSecret="certificates-tls-secret"
        tls.certFilename="cert.pem"
        tls.certKeyFilename="cert.key"
        tls.certCAFilename="ca.pem"

The chart facilitates the creation of TLS secrets for use with the Ingress controller (although this is not mandatory). There are four common use cases:

* Helm generates/manages certificate secrets based on the parameters.
* User generates/manages certificates separately.
* Helm creates self-signed certificates and generates/manages certificate secrets.
* An additional tool (like [cert-manager](https://github.com/jetstack/cert-manager/)) manages the secrets for the application.

In the first two cases, a certificate and a key are needed. Files are expected in **.pem* format.

* If using Helm to manage the certificates based on the parameters, please copy these values into the *certificate* and *key* values for a given *ingress.secrets* entry.
* If managing TLS secrets separately, it is necessary to create a TLS secret with name *INGRESS_HOSTNAME-tls* (where INGRESS_HOSTNAME is a placeholder to be replaced with the hostname you set using the *ingress.hostname* parameter).
* If using self-signed certificates created by Helm, set *ingress.tls* to *true*, and *ingress.certManager* to *false*.
* If your cluster has a [cert-manager](https://github.com/jetstack/cert-manager) add-on to automate the management and issuance of TLS certificates, set *ingress.certManager* boolean to true to enable the corresponding annotations for cert-manager.

<% if current.app == 'redis-cluster' %>
> NOTE: Current version of Redis Metrics Exporter (v1.6.1 at the time of writing) does not fully support the use of TLS. By enabling both features, the metric reporting pod may not work as expected. See Redis Metrics Exporter issue [387](https://github.com/oliver006/redis_exporter/issues/387) for more information.
<% end %>
